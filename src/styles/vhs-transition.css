/* VHS/Old TV Transition Effects */

/* VHS Overlay during transition */
.vhs-transition-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  z-index: 9999;
  pointer-events: none;
  opacity: 0;
}

.vhs-transition-overlay.active {
  animation: vhsTransition 1.5s ease-in-out;
}

/* VHS closing effect - like turning off an old CRT TV */
@keyframes vhsTransition {
  0% {
    opacity: 0;
  }
  
  /* TV closing - horizontal line effect */
  15% {
    opacity: 1;
    clip-path: inset(0 0 0 0);
  }
  
  35% {
    opacity: 1;
    clip-path: inset(40% 0 40% 0);
  }
  
  50% {
    opacity: 1;
    clip-path: inset(49% 0 49% 0);
    transform: scaleX(0.95);
  }
  
  /* Complete black */
  55% {
    opacity: 1;
    clip-path: inset(50% 0 50% 0);
    transform: scaleX(1);
  }
  
  /* TV opening - reverse effect */
  70% {
    opacity: 1;
    clip-path: inset(40% 0 40% 0);
  }
  
  85% {
    opacity: 1;
    clip-path: inset(0 0 0 0);
  }
  
  100% {
    opacity: 0;
  }
}

/* VHS noise/static effect */
.vhs-transition-overlay.active::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(255, 255, 255, 0.03) 2px,
      rgba(255, 255, 255, 0.03) 4px
    );
  animation: vhsNoise 0.1s infinite;
  opacity: 0.8;
}

@keyframes vhsNoise {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(10px);
  }
}

/* VHS color distortion */
.vhs-transition-overlay.active::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to bottom,
    rgba(18, 16, 16, 0) 50%,
    rgba(0, 0, 0, 0.25) 50%
  );
  background-size: 100% 4px;
  animation: vhsScanlines 8s linear infinite;
  opacity: 0.5;
}

@keyframes vhsScanlines {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 0 100%;
  }
}

/* White flash at the peak of transition */
.vhs-flash {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #fff;
  z-index: 10000;
  pointer-events: none;
  opacity: 0;
}

.vhs-flash.active {
  animation: vhsFlash 1.5s ease-in-out;
}

@keyframes vhsFlash {
  0%, 100% {
    opacity: 0;
  }
  48%, 52% {
    opacity: 0.4;
  }
}

/* Old School theme specific styles */
.old-school-theme {
  --scanline-opacity: 0.15;
}

/* Scanline effect for old school theme */
.old-school-theme::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to bottom,
    rgba(18, 16, 16, 0) 50%,
    rgba(0, 0, 0, 0.25) 50%
  );
  background-size: 100% 2px;
  pointer-events: none;
  z-index: 9998;
  opacity: var(--scanline-opacity);
  animation: scanlineMove 8s linear infinite;
}

@keyframes scanlineMove {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 0 100%;
  }
}

/* Screen flicker for old school theme */
.old-school-theme::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.02);
  pointer-events: none;
  z-index: 9997;
  animation: flicker 0.15s infinite;
}

@keyframes flicker {
  0% {
    opacity: 0.27861;
  }
  5% {
    opacity: 0.34769;
  }
  10% {
    opacity: 0.23604;
  }
  15% {
    opacity: 0.90626;
  }
  20% {
    opacity: 0.18128;
  }
  25% {
    opacity: 0.83891;
  }
  30% {
    opacity: 0.65583;
  }
  35% {
    opacity: 0.67807;
  }
  40% {
    opacity: 0.26559;
  }
  45% {
    opacity: 0.84693;
  }
  50% {
    opacity: 0.96019;
  }
  55% {
    opacity: 0.08594;
  }
  60% {
    opacity: 0.20313;
  }
  65% {
    opacity: 0.71988;
  }
  70% {
    opacity: 0.53455;
  }
  75% {
    opacity: 0.37288;
  }
  80% {
    opacity: 0.71428;
  }
  85% {
    opacity: 0.70419;
  }
  90% {
    opacity: 0.7003;
  }
  95% {
    opacity: 0.36108;
  }
  100% {
    opacity: 0.24387;
  }
}

/* CRT screen curvature effect */
.old-school-theme .app {
  transform: perspective(1000px);
}

/* Slight vignette for old school theme */
body.old-school-theme {
  position: relative;
}

body.old-school-theme .app::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    ellipse at center,
    transparent 0%,
    transparent 60%,
    rgba(0, 0, 0, 0.3) 100%
  );
  pointer-events: none;
  z-index: 9996;
}

